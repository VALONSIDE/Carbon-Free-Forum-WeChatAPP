<!--pages/forum/forum.wxml-->
<view class="forum-page">
<navigation-bar title="碳社区" back="{{false}}" color="white" background="#07C160"></navigation-bar>

<scroll-view class="scrollarea" scroll-y type="list" bindscrolltolower="loadMorePosts" refresher-enabled="{{true}}" refresher-threshold="50" refresher-default-style="black" refresher-background="#f2f2f2" refresher-triggered="{{refreshing}}" bindrefresherrefresh="onRefresh">
  <view class="forum-container">
    <!-- 左侧列表 -->
    <view class="post-column left-column">
      <block wx:for="{{posts}}" wx:key="id" wx:if="{{index % 2 === 0}}">
        <view class="post-card" bindtap="goToDetail" data-id="{{item.id}}">
          <image class="post-image" src="{{item.imageUrl}}" mode="aspectFill"></image>
          <view class="post-info">
            <view class="post-title">{{item.title}}</view>
            <view class="post-content">{{item.content}}</view>
            <view class="post-stats">
              <view class="stat-item" catchtap="toggleLike" data-id="{{item.id}}">
                <image class="icon" src="{{item.isLiked ? '/images/liked.png' : '/images/like.png'}}"></image>
                <text>{{item.likes}}</text>
              </view>
              <view class="stat-item">
                <image class="icon" src="/images/comment.png"></image>
                <text>{{item.comments}}</text>
              </view>
            </view>
          </view>
        </view>
      </block>
    </view>
    
    <!-- 右侧列表 -->
    <view class="post-column right-column">
      <block wx:for="{{posts}}" wx:key="id" wx:if="{{index % 2 === 1}}">
        <view class="post-card" bindtap="goToDetail" data-id="{{item.id}}">
          <image class="post-image" src="{{item.imageUrl}}" mode="aspectFill"></image>
          <view class="post-info">
            <view class="post-title">{{item.title}}</view>
            <view class="post-content">{{item.content}}</view>
            <view class="post-stats">
              <view class="stat-item" catchtap="toggleLike" data-id="{{item.id}}">
                <image class="icon" src="{{item.isLiked ? '/images/liked.png' : '/images/like.png'}}"></image>
                <text>{{item.likes}}</text>
              </view>
              <view class="stat-item">
                <image class="icon" src="/images/comment.png"></image>
                <text>{{item.comments}}</text>
              </view>
            </view>
          </view>
        </view>
      </block>
    </view>
  </view>
</scroll-view>

<!-- 发帖按钮 -->
<view class="create-post-button" bindtap="goToCreatePost">
  <image class="add-icon" src="/images/add.svg" mode="aspectFit"></image>
</view>
</view>